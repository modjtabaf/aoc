
#include <cstdint>
#include <iostream>
#include <string>
#include <string_view>
#include <unordered_map>
#include <utility>
#include <vector>

using RawTowels = std::vector<std::string>;
using Patterns = std::vector<std::string>;
using Towels = std::unordered_map<char, std::unordered_map<char, std::vector<std::string>>>;
using Scores = std::unordered_map<std::string_view, uint64_t>;

RawTowels sample_raw_towels{
    "r", "wr", "b", "g", "bwu", "rb", "gb", "br"
};

Patterns sample_patterns{
    "brwrr",
    "bggr",
    "gbbr",
    "rrbgbr",
    "ubwu",
    "bwurrg",
    "brgr",
    "bbrgwb",
};

RawTowels raw_towels{
    "gwrgb",
    "rwwr",
    "rrgwbgg",
    "rwgw",
    "wwgu",
    "rrwuww",
    "wgrw",
    "wbgw",
    "gwrg",
    "ugbr",
    "uuru",
    "bgu",
    "brrur",
    "wggbrb",
    "rurrggw",
    "rggb",
    "wgww",
    "bu",
    "ubwug",
    "bruuu",
    "u",
    "ggbrwgb",
    "burgbub",
    "wrbwguuu",
    "wgb",
    "burugbu",
    "wwgr",
    "uwb",
    "grr",
    "ugu",
    "ggbuu",
    "gbrb",
    "guw",
    "buuguu",
    "rrbrrg",
    "wbgurw",
    "wurr",
    "rgbr",
    "uubu",
    "gwr",
    "gbrwu",
    "ugrru",
    "ugbur",
    "urrrwgw",
    "wrbgrw",
    "rruwr",
    "uwwurwu",
    "wbgbbrb",
    "rbwugu",
    "wrr",
    "wub",
    "rggwg",
    "rgw",
    "ugwgbbr",
    "gggg",
    "uwuuwbww",
    "wwwgw",
    "uub",
    "ugurwwgw",
    "ubrg",
    "rwww",
    "grgu",
    "uwu",
    "gbu",
    "gru",
    "rwrwb",
    "wrw",
    "ubugrb",
    "ruu",
    "grw",
    "wbrggg",
    "wbwwr",
    "wruburw",
    "wurb",
    "wwg",
    "bwburg",
    "gwrbg",
    "guwgr",
    "gwu",
    "wwwuw",
    "wwbrw",
    "gruw",
    "uwbggr",
    "uww",
    "gwb",
    "wurrgg",
    "uuww",
    "rwgwgr",
    "wubg",
    "uuur",
    "uwrrrwu",
    "bbww",
    "wgbwb",
    "rrgg",
    "grggwr",
    "bb",
    "ug",
    "wbwr",
    "rw",
    "rbbru",
    "bwbbub",
    "bur",
    "ggbg",
    "gww",
    "buruggrr",
    "bgbw",
    "rru",
    "rur",
    "brbbr",
    "urug",
    "ggrburu",
    "rgb",
    "bwrwrubu",
    "uuugw",
    "uwgwwb",
    "wgu",
    "wguwuww",
    "ruw",
    "gub",
    "bbwb",
    "ubbgrr",
    "ggr",
    "rug",
    "brg",
    "rwg",
    "ubgwrgr",
    "bwwbw",
    "rww",
    "bgruwuwu",
    "uuw",
    "guwr",
    "urg",
    "urr",
    "gggbwu",
    "brub",
    "gruwub",
    "gbbr",
    "uru",
    "wwur",
    "grrrwbg",
    "rr",
    "guwwuw",
    "ruwr",
    "bubw",
    "bgru",
    "bbggb",
    "wuwbrrg",
    "w",
    "rgr",
    "rguu",
    "wugr",
    "rrbubrgg",
    "wugrr",
    "bru",
    "ggguubr",
    "brwgw",
    "gwbbgbgr",
    "bbu",
    "brr",
    "rubgu",
    "burgrr",
    "wwgw",
    "rwu",
    "rrgubgu",
    "uwr",
    "bguwbr",
    "gw",
    "gur",
    "ruurb",
    "wbur",
    "urub",
    "wrwbubg",
    "ur",
    "uggwr",
    "bbbb",
    "rrg",
    "rgwg",
    "rguw",
    "rbwgr",
    "uugb",
    "grguwwgr",
    "bgubw",
    "bbg",
    "rgbw",
    "wgwrubrr",
    "gwug",
    "ubrugwr",
    "uuwgur",
    "bwurw",
    "ggu",
    "gubb",
    "gbbub",
    "gwg",
    "gugw",
    "r",
    "wgg",
    "wwbb",
    "buubg",
    "rgbwubug",
    "urbb",
    "bg",
    "wwrur",
    "rwr",
    "ugug",
    "bwg",
    "rbb",
    "bbwgru",
    "gbr",
    "urgwb",
    "rbuwub",
    "gbb",
    "rwwgw",
    "grb",
    "wrbw",
    "rrbbwr",
    "rrrubb",
    "rrggr",
    "uugug",
    "rwbr",
    "rguwuuw",
    "wwu",
    "wruggur",
    "wurbb",
    "urrg",
    "urgwrrr",
    "uuu",
    "wrggbg",
    "www",
    "rwrgg",
    "wbguru",
    "bwgr",
    "wu",
    "bbgr",
    "guu",
    "wbrgurw",
    "rbg",
    "ubgrrg",
    "uggrw",
    "wbbwgwbg",
    "uur",
    "brbrbggb",
    "uwbrr",
    "gwrr",
    "ugw",
    "wg",
    "wrrurrb",
    "uggb",
    "bw",
    "urgwg",
    "wwrbwu",
    "bwwbguw",
    "bwb",
    "brguu",
    "ugrbr",
    "bwrg",
    "bbw",
    "bugwu",
    "gb",
    "gugu",
    "gwwurwu",
    "rbw",
    "wuuw",
    "guug",
    "ubb",
    "wrg",
    "uguw",
    "brw",
    "bgg",
    "wrgr",
    "wbrugb",
    "gwgug",
    "uwuurug",
    "rrgu",
    "brrrwu",
    "wbr",
    "uu",
    "rwrru",
    "uwrgugw",
    "gwugu",
    "gugrg",
    "wgr",
    "ggurb",
    "wrur",
    "wgwrug",
    "bwuw",
    "bbrguu",
    "grru",
    "bwur",
    "grgbgbgr",
    "rggub",
    "ggb",
    "wbb",
    "uubbrw",
    "wubb",
    "rubrwb",
    "gggrg",
    "bwbb",
    "uw",
    "rbgwrg",
    "wbgr",
    "bggbb",
    "rwb",
    "buw",
    "ubr",
    "gg",
    "rurrgu",
    "gr",
    "rrb",
    "ugb",
    "gbrrb",
    "rub",
    "rgubbbg",
    "wuwg",
    "wrgu",
    "wbu",
    "wbwgb",
    "ruwbguu",
    "gbbrgbu",
    "urgbgb",
    "bgr",
    "buu",
    "wbg",
    "uruuw",
    "bwuwugw",
    "wwbrr",
    "wguu",
    "rubru",
    "bbb",
    "urb",
    "bug",
    "wgrbw",
    "bwu",
    "bgur",
    "gu",
    "ubgg",
    "gbbw",
    "uguu",
    "rwrb",
    "wru",
    "bubrwu",
    "wwr",
    "wuwub",
    "bbr",
    "uug",
    "burw",
    "uwg",
    "rurwbbr",
    "wbw",
    "wbwb",
    "wuw",
    "wur",
    "brbwr",
    "wr",
    "wbrwug",
    "ugrgwu",
    "wb",
    "ubu",
    "ggg",
    "brb",
    "wwb",
    "ubg",
    "gug",
    "urbuwg",
    "rgg",
    "b",
    "br",
    "wrrbbw",
    "ggbbg",
    "rrggw",
    "rbu",
    "brbrw",
    "rbwrgb",
    "ubw",
    "wuu",
    "gbwur",
    "gbg",
    "bbbggubb",
    "wguuub",
    "grrbwu",
    "gwwgb",
    "rbwru",
    "ub",
    "gwbub",
    "burgu",
    "wgw",
    "uurbwbw",
    "brrw",
    "rb",
    "brrbbbu",
    "bggg",
    "rugr",
    "ugg",
    "ggw",
    "gwgwr",
    "grurw",
    "bwrgbw",
    "bbgwuuw",
    "rgbwwu",
    "rrrbg",
    "bggu",
    "brwb",
    "bbbgur",
    "ruubrb",
    "wubgrru",
    "brrg",
    "uubbr",
    "ubbrugrw",
    "gubrurwr",
    "rrw",
    "wrb",
    "rgwbw",
    "uubgru",
    "wrwg",
    "bgw",
    "ruuw",
    "gbwrg",
    "ww",
    "rrrbw",
    "gurbrr",
    "ruuug",
    "wrrr",
    "ugr",
    "wubbrwbg",
    "gbwrwrgb",
    "bugr",
    "gruuwg",
    "rrr",
    "bubg",
    "bgbrwr",
    "wug",
    "rgu",
    "buugwb",
    "grubgr",
    "grur",
    "gbw",
    "wwrgb",
    "bgwub",
    "rbr",
    "rrwb",
    "gwuwrb",
    "rwwbbrr",
    "grurbbgr",
    "wrwubb",
    "urbrwug",
    "bbrw",
    "ubbb",
    "bub",
};

Patterns patterns{
    "wuwburgbbuuwbwrgrgbrrrbrbuuugwbgbuurrwrbruu",
    "wuwgbububbrgbbuurbrrrbbrwgbwgbubrubbbubwgwubbwbbrrgrwbrwgrg",
    "uruwrbbguwugrggbuuwwggrwgbrrwrwgguwbbugwruubrbrruwgrg",
    "wwgwbuubgbgwwrbrrrwurwrguubwwwwgwwuuurrruwbrurwgwubwgb",
    "gwrruurruwuurrwwbrwgbrgggbbbwwugugrruwrwuwwwuwbrbbrwrurgg",
    "bggrwwubruuururwrrrgwwggwwguguuubruwurbgwbwwuuguggrruggrg",
    "ggbuburwuwbbrwburgrwbwuwgrbruwgwubugrurggrru",
    "wbrgbwruguruwugbgbugugrrruwggubgurubbrubgrrruwrwurrruggbbb",
    "rbbuwbwrugrggrbrugrbwggrrggwgbwrwruburwggb",
    "wuubuuwwrbgbwrwbwwrbbbbbbuugwrgruuuggbbgbubrbbbbwuurrbuwr",
    "bgggbrbrbggbgbbwwrbgrwgguuguwbrurbbrgurrgwgrrggbuugwgrg",
    "wwrugbrbbbrrwurrggrwgrubuuguurwgbggubuuubrubuugwg",
    "ggrbbwrgbbubgwgbwgrgruwgwrrgwggwuwbuwrgrg",
    "rbrbuwwugugrwbbwgwbgbubwrrrruguwguwugbwbrwuw",
    "brrugbguguggrgurgbwwgbbruwrrrrwguggguurruuwrgwwbrwbuggrbb",
    "bgbrbwbbbrbbguurwgwwgrbuwgubrurwrbwwguuwbbr",
    "rgubwrubugugrbrbguggruuruwwuuwwurwgrbgguuurbbuwuurbu",
    "gwubuwuugwguugwbrrguugggggrgubgrugwwgrwbgbbbww",
    "wgruwrbrgwwbuguwgwwugbuwbbrbuguurgwbgbgbbrgbrgruwbbgrg",
    "rrggwwwuwgwrbbgrurgbrggruurwguurwuwrwwbgruugrubrgbuuruurggrg",
    "rbuwubbwbwguwuwbwbrurbubguubuurruuwugwwuggrggrrwwuuburrwbu",
    "wwurbrugubugbbruugrrggbgwuggubbgubgwubwrbwrubwubwgrwburwgrg",
    "ubwubruurwbrugburguuububgwgwurgwrbgbugggrgrgugwgw",
    "rgugbbgwbbwubgrggruuwwbgrgrbwwbwwbbbgbggbruurbgwruggbww",
    "ggubwwrggbuugbugrbwuugrrwbuwrgwgbwwrrwwgbuwbrrurgw",
    "buwgbbwruugbugwggrbgrbugbguubgwwuurrwgrg",
    "uwrbuwurgurwruugugwbbbwrbbrurbwguuguwuwwuwwgwwbbwrubbgrg",
    "rubrrurguubrugrbbwbwgruruwwbgwwgbwgbgbgwubbrubuwwgrg",
    "bgbguwrbbwgbbwugwwruwrrwwrbuggurrwwuwwwuwugrg",
    "urbrbwwbrubuggubbuwuububugwrubrbwurgrggguurbuggrg",
    "rrwwuwgugrrwwwbgbrrrbwgurrgurwbrbrwuwrrugwrwbubrggw",
    "wwbrwuwrguuwuugbbwrgggrugbgbgburwrrgrubgwbbrwbwbbg",
    "wgwwrrguwwwwwbgubrwwrgrbwgggubgrubbuurgrwubbbbbwbgubgguwr",
    "gubrggugwbbwuwwrbgbbbrbwbgruwbrubbruwwurbuwrgbgwwwrwurgr",
    "wubwrgubrrwbbbwrwrwrwuuruubgbrgrbgbwbrwrwwubb",
    "bbubwwrugububrbggbwwbuwbrruwwrwbgbbrwrwurubrwbwgurgrg",
    "grbwgbuwgburugurwbgrwbuggubbwrubbwwbrrbrrugguwgbwgbggrg",
    "gwuwuwbgwbwwrbguuwwgbuwurwwgrgubuuwrwuugrubwgbbwrggwwbbgrg",
    "uubbbbbgwwrwbwbugrgbruwgugwrgwrgrgwuubggrg",
    "wgggrwuwggwbrubuwgwgwrubwbuwwbubuuggrubbugwbgurrgwwugwrwr",
    "bruwbbwrrwgrwrruuwgrbbbrurbbrbwrwbwrbrbbggubrbgrgrg",
    "rbggburgrurbbgrgbwrguurbugrwwgruburuwwwburrrwugbugwuwugb",
    "wubgbububrwbrbgbwuwbrrrwwwwwgbwrwurwrbwgbubgggburwbrwbgrg",
    "rgwrurgwburrwgwwbwugbwbuwgugbgrgugurwbuuuwbugrg",
    "gguggwwwbbwggwrrrurwbbubrrwrggurrwuuwwrgrg",
    "rrgbbgwgwgbbbbgbrrrbgwgrrbgrruuruwuwbubwggrg",
    "rrbbwrrggbwbwuurgbwrgruguubwgggrrgurrruwruggrg",
    "grgruwurwbbururbwrrbrgubgbrwgrbbwrrgwwrggrg",
    "rrrrbwwwwwubgbugwuwubgurruuuubrbrrbrgbwbgr",
    "ubrgwwgggrwuugbbbbggrbugbwbuwugrugwwwrbbubruwwbwwuw",
    "rurrwugwbugubrbrbrrwwbrgwwbwuwgwwuuuubrruubgggugrggwrgubgrg",
    "rbrgwwrwrubrgwwrwgrrrbuwbbgwggbbrbuguugbrrgruwbubgur",
    "rrwrrgbbruggubrubuugwuwbgwgwrubrrrrbrwgubwgrgu",
    "ggwugbuuguwrgrubrgbgurgrbgbrwbwbwwguwwwruug",
    "rububwugbuuugrwrbrugburgwwgwgwrwguwbgbwgbbbbbgggbbgrg",
    "ggbuuwrwbrgwrbbbwruurwgrbbbwwgrgrrgrgrwgrwbgbubbgggurbgrgurg",
    "ggbwbgbwuwbrgwuggwugrrugbrurgbggrgbuuwruuwwburbuwgwrgrg",
    "gubguwruuwburrbgwgwwuwggbbbgwgwwggrguwwgrg",
    "uwgbbguwrrgruwbrwruwrugrwwggwwuuwrwrgwrbugbgrg",
    "uwwrbwguuurwgrurugurwbrruruurggubggbwuwrrugrg",
    "grgubbgbuguggrbrggrugrgwwwbwrwbuwwwbgwbrrrruuubuwwgrubrugrg",
    "brrruguubbuwwugugrrrgggbrwrgwbbwbbruguwgrwwuwbgbrgbgrg",
    "wbbbwgrrgrbugwwugugrgwbrbgwwuwwurwwrrgrwwuguubrgrg",
    "wrgrwwrwbugububbgrguguubrgbgugwurggbbrgurwgrg",
    "wbruwbuubbwrbrrurwbgbgurrgrgurbuubbbrbbruugrbuwgrg",
    "bggruwgugrwurbwbbbwbrgggwbgguwwbrbwwbggggguwwwgrgubrgrg",
    "rbwuurrwgwbrubgugwrrugurbugwgruuggbwgwurrubgrg",
    "wrwrrwbbgwuruwrubgrrbububrugbrurwrrbbrrgrg",
    "gurrwgrbrrguurbwrurugrwbbubwrwwgbgbrubuurugwrrrbgurgrg",
    "gbgwuggguuguggrrrrwbrwgbrbwwurubuugbwbbbrbwruwbgguu",
    "rugruuubwruurwbwburwuwgbbgggrwwuburuwwbwwbwrwbrgrg",
    "wrwurbrgwrubbgwbubbuubrrwwgurggguuburugbrbwrurrugwgrg",
    "wgwbbrugguurgrwuugbbwbrgrbbrbuwwgbbuwguwwwgruburggbugbwgg",
    "gbrbbrbuurbrwbbuubwbgbrwgwwbuubgggrubrugurbubwgrgbrbugrg",
    "rggruwgubuwruurrbwwgwrgurrbbguguwwgruuurgrrbuugrg",
    "brrgwgrwgwurbgrrgbuwbbrrrwwbrbbbgwugwgrg",
    "bwrgbbrwbwggwrgugruwurgwbgwuwugbwgubgwwgwbubgrrbugggrw",
    "rrrrrwwbbgurrwbgwwbwbbguwuuwgrbbbggbwgrg",
    "wrgugwugwbbwuubrugbggbwwbrggruggrwbgbbbruwuuuwwwbbbbggrg",
    "wbgrgrbuuurrwgubwgrwwwggbbwuubggurbgguuuugrr",
    "wugwrrugwbwbrbuwbrggurgrggrwrwbwubrrwwbwuugugbbgb",
    "guwrwuubbrwggwburbbgrruwbuubggrbubrgbuuwuwguggrg",
    "bgrubrbwwgurbrburrgwgbgwwbwbwwwubgrrrwubgurubwbubrrbwugrwgrg",
    "rgwurrgrrwrbwbwrrwwgbbrgwwugwwwugwbwgwuwuuwuw",
    "bbugwrgwuurugbburugwwuuruwbwurwwbgbbggwurwgbgguruwr",
    "rwgrurgwurbgrbwgbgbbgurggrrrrubgbrbuwwwrgrrrgu",
    "grwgguugbbruwruuwgwrbugrrbwbguurbrwrbgrrruguuwwuurwb",
    "ugguwgwgrrrrrwbwbrrwgubbruruurrrubbbugugwwgrg",
    "rrwbgurruwggbbgrbbgruuguwrggwgwrwgrwwbrwbggrgrg",
    "rbwrubbwrwbwgubwgbrbrrugbwbbwbbbggggggurugrbgbwuwrrbgwbbgrg",
    "brugwgugugbbbbruwbruwuburrrgrwbbbgrwruguggbgwgwrwgurwub",
    "wuwwgrbrguwugwbgrgwggwruwgwbrwgburruwubrbwrgrgrg",
    "rgwgbbgrubgwrbwrruuwgwgguuwgrbugbgbguurgrg",
    "wwggwurgbrwrwrggguwrggurbwwwrgwuwrubgbgbbggrrrgbburw",
    "bwbwbrggbgbbwgrwuwrbwbgrgwrwrbgwrubugwwuwuuwrwbubggrg",
    "gbrbrwbwruwrwurwuuwuuwbwwwggwggbbubgbrruwrrbrwbuwbbbwgrg",
    "wruuwugbbugrbruguugbgwbrbwubguggrubgwurbbggug",
    "gbbwwurbugwwwguuuburuurwrubrrrbburwugbbwgbbgugrruugrugrg",
    "gwguwgubbrugrwwuwbguwbrbbggwgbwbwgbggbrggrg",
    "rbgrgugwubwwwwrbuurbbwbbgugggbbgurgwwbbgrgwurw",
    "brwgrgbbbwbuwruubbrwrbuubbrrggrruwuuwugrwgrg",
    "grrrubrurgwrbbbgrgrrbgbrrrbwrbwguuubgwbrbwbw",
    "gurguuwruwrbbrrrbwwbrbwrgubrubggrwrrggwbugwugubugwugrg",
    "uwwubbggbrwwbgrwgrbrubuwbgugbwwwbbgbuwbwugr",
    "wuurbwwwbrbrubbgwrrrruwrruruguggwubggrgrg",
    "wwubwwgubgwrruwuwgbuubrrgbuwugrgbbrugrwwgruwbwgwbubwuugwg",
    "rubuuwwuburgwururrbbwbbgwggbgrggbuggrwwgruuuwgbrwgwwrug",
    "ubrububrbgrgwbrwrrgwrgrgbuwrwrugwbwgwwuwugrg",
    "ugwgwwwrbbgwgbguugwbwuwruwwrguwwbgrwrrbbwgwggwbgwbwrugubrgrg",
    "rwubwubrgwwrwuwubbrwrwbbrwbbubruwrgrrruwrwwruwwuuugbwrbgrg",
    "rbrguwwgruuuuwbugwbugbbrgurrgugwuwurwbwbubuwrbrubgwbrwurr",
    "bwgrgbrubbrrwggwgwugwrgurguwguwubuwbbugubgrg",
    "rgubgwwgwrrugbgrbrurgrwbrbbggwwrgubrurbrurubggrugugur",
    "bbgrwwrgggrrrrgrbrwubgbbbwuwuwwuuwuurgrgrugwugrwugruwbburb",
    "wgurrurgrbwwuwbwwbgbuwugbgwuwbgwgbwbgrbbwbrgbwgbbrgbub",
    "bgwbuwuubbrbgwbgggbubuwgubuugggbuurwgrggwwrbwwuwwbwgrg",
    "bgwwbrwgwwgrubgrbbggrbggbwbgbgwgrwbwbwuwugugrwww",
    "ubrrbrrwgrubgbbbgrbwbuuwwbburrrwgggrbgbubbrwgrg",
    "bgwrwuubwwwggwrrrurbwgwgguggrgwbggbrrwggbggrg",
    "rrwuwubwurburbgubrbggwwbbbuurwbubgrurgrg",
    "wwbwubbwwbwuggbgbwrwrgbwbrbbugwwuburrugrbb",
    "ggggbwwggrugbrurburrbbwgwbubwgugrrrrbubugrg",
    "gbwgwuugwbrwurwbubuugwuwubbbgbgbuguuuwbbgrgbb",
    "bbwbgrubrwbwbbgrubuwrugbggugrgwurbwubwgwwbrurgbrugrg",
    "wwgrbbbugbbugbuugrruwguguwurbuuuubbbbrrruburubbwgbburbrggrg",
    "wrwggrgwbgrwwgbrgubuuwrrbwgrwbwburbuubrrbug",
    "wwwgurwbuwgwwrbgbwbggrbwrrwgurwgwrwwwuubbb",
    "bwbrgwruuuwwwwwwuugwwbgubuwrbgbwbgwwbubbwwbrugrg",
    "grbugurggurwwbugbguuwbgbububwgurrbwrgggubrrgbgwgguwbbgrg",
    "rwbrggurugbbbggbrbgwbwgbuwrwgbrgrgbubwubgbbuuugugggwugugb",
    "bgwbwbgrubbuubggwrrugrubwgbbrruwrwruwrwuwbgggwbwrrwbwwgrgurg",
    "guguurwuuuwuwrbuuwggbwbgbwuwbuuwubwwwbgugbrb",
    "wurguugrgurwgbuwwgbwrgwrgbgbwgbwurwrbwrbwwr",
    "bwwuwrwuwrrburwggggwwrgruuwguruugwgrburgbburrrburrgb",
    "rwruwruwbwgbbruurgbrbubwrwbggggubugrbrbbwwggggu",
    "ggbuwugugggurwgugrbbbugrwwwuwgbugguuubbugrgbbrbugrg",
    "uguuwbbuwwbuuruwgwrrrrbrwwrbubrbubuuwwbgrg",
    "uurgwbgwrugrrrrgbwubuguwrwwwguwwuuwbbgrg",
    "rrrrbbwugbwbuurggbrwuwbgwruwgwugbbwwgurwgwwu",
    "rwbbbbwggburruurguuubrbubrbruwrbwurguwwwuguguwububw",
    "uuuwbggbbgrubruwgwbuwbwgbwrwwrbwbbggrbuugrg",
    "brubgrgwwrggubwwuugurrbrbbubbrbgwwrbugwgrg",
    "buwbgbgbwbbbwgwgwgwwurgwuwggggwwggggbugwwrbbwwrruwrburrwug",
    "ugrwrrbbruwwbrrbgbrrwbgwggbbruuuwrggbwwrrwrr",
    "bwurbwuggwgwruurrgbbgugrwbguwwgrrrgubwwrwrbbbuur",
    "rurbrggwuwrurbrrgbrwrrbbgbwwgrbbrggwbgurgrg",
    "uugbrbgurgwbwgwugrwurrwwrwgwwbburwbrrugbgubgugwrrrrgw",
    "rwrwgwuwuwwrggbwbrbrbggbrgruguwgwbrwwuwbbwwwwrgr",
    "grrwwwubbgbrrggwbbbuuugugwwrrgrruggwbwugwbwuuwru",
    "ggbrrbrbbrbwburuwbgwuwugrrbrbwwgbwubgrggrwguwrwrrrwggb",
    "uwgugurwwgwbgwuguurwwwgrwbugbrwgrbbubwgbwgbbruugrb",
    "wggbugwrbrwruugwurwwbwggrbggugbgbbwbuwbbbrwggrg",
    "buwrurgguugwrwbbguubuwwgguggbgbrwgrruwwrwgrwwrbrwurubrwgrg",
    "grwrwuwuwbuuwgbwgggugbggwuwrwbgbgrwwugrwwgbbubugwbgrg",
    "gwrurbrrguguurgbwubugguubwbwbuguubugwrugbwbubg",
    "rwuguwbrbwbbwwwurbwrugubbrgrubbbwuwwbbbrurbwggwb",
    "wuwrrwwwbgwgwgbuwuuwugwwgrwuuggrrubrgrgwgwwgrg",
    "wbrrwgwbubrwwrgrrwurubwrbggbrubuubgrguruggwgr",
    "bbggwuugurgrbguuwrgrgwuuburbggrwbwwurruwbbgbuwwwggr",
    "ubwbuuuwurwbubbrrwbrbgbbgbrggbuwrwgwbwrbwwwugburww",
    "uwgwgwggrgbgbgrrburugugubrbrgrwgwrwwrbwbgubbgrrgrbrrgrg",
    "gubruwugbguwgguuwbwgruwbururbbrbrwwbrggwwwbruwgbrg",
    "burwurwbgrwugwubrbbruubwuwgrugbbbggubbuguwuurbrrrrbbg",
    "bgugurbwwgbuwurwwbgbrubgubuwrgugwrgbruubwrrr",
    "ugbwwuuguwbuggguugrgwuruuurgwrgugbrggwbbuuuuuwwrrgwbgrg",
    "bggwgwuubbwbggwubrrwbrwwggwrrgrrbrggrrurwbwbuggrrbwrgrugrg",
    "ubgrwbbgburwrbrgwurgbbbbgurgbrwrbwbgbruruggr",
    "wbguwubgwurwwgbwuwrrbbbbggubbbbgugbubwgbbggrg",
    "wwwgbwuuugwugurbwubgrrggrrububwburuwwguwbbgwuwwwu",
    "brbgruwrurgwwbrwbuwuwuuwrwbwgubbubwgguurggbuubrgug",
    "rgurrbuuurgwuuwuwbbrubgbuubwgwgrrwwbggbrugwuuwuububrb",
    "rbwwrwrrwggubwwubwuurwguuwruugrgrwbrgbuguwwgrg",
    "rguwuwrwruuurbgwgbuwrwgwbbrbwgguugwbrrrwrbwrrr",
    "gbwuburbgwburuwurguubbbubbgwwwwwwggggwgrg",
    "grugwbwbwurgwruurwwbbbgbguuwubwbbubbubuuwguwbwbgrwbrbgrg",
    "brbugurrurgguguguubwbbuugurrubbrugrwbbrurububbbrgwgrg",
    "bbggwbuwgbuuuwbrrwbbbrgbrugbwgwrburbrgurrwgwguwgbrgrg",
    "rrwwwgwrugbgbwrbwbwwwuwuwrwbuwwwrrwuwwgrg",
    "ggbrbrwgubgwrwwgrwurbrruwrbuwwwwwrwbbwgwrwbguggrg",
    "gbugggbugwgwrgrurbbbgwururwuugwwurrrrurbbwgwrrugrg",
    "burgubbgwuwbgwbuwbwwbggggrurrwrgbrrgubwwwrgr",
    "wubbrwbgwgubwbwwbgbggruwbgrbrgggbrbubbwugwubggrg",
    "bggrwwgbuwrggurbwwrruubbbuubbgwrwurrugurgw",
    "rwugwrrbgubgrubguubbbggwrgwbbgrbgrrwbbbuwbbrwgrbbuwg",
    "ggrwwgbuwwgrrbwugbguwbggwrugrbwbrbbwrbrgrgrrbwrbwugwbwg",
    "urbguwguwbwwbuubugrwgbuuubrbrgwbruwubuwrwruwg",
    "gururbbubrbgbguurbbbrbgbgrbbbbuggwwugbgugwbugrg",
    "bgbrurgwwwgrgbgrbrbgubuggbuwburrubrrbrbuwbbrgwgwwrbwuw",
    "rwrgwwugurbuubrwubbbbrbuggugubbggbubrrrrbrrrgbgbbbururrwgrg",
    "grwbbbgguwuwrwwgbbbwgwrbubugbbuwgurgrbwgrrruurbwrgrg",
    "ggwwbubgwwbrgbbgwrbugurwuwwgbubuurburgbrwwruguwgwrubrrrbgrg",
    "bgbguuwwwuuubbuuwwurgbrbrwbruwuuuuurgwwgrg",
    "ggurugrubruwgbggbbwrgrwrbwbwuwrbgwwgwgbbgwwur",
    "rubgrwbbuwbruwrrbubrggrugrbbguwgggrrwruwbbggbuwbbg",
    "wbuuuuuwbggugrugbwrrrgwbgggwgguwubwuwbgwwugrg",
    "rgbubgrwrubwuugburbwwwwwurwubwbgubbgwwgrwuuwr",
    "rgbwuggburwrgbwwguurwbugbuwurrrwgurwggrg",
    "bwbubwuwwgruugwuwbgurbgwgwwgrbrgbuguuwubwubwbugugbgr",
    "bbbuwrurgwbbubwbrrwbrbuurbrrbgrgbbubgbruguruubwgbrrgg",
    "gwbbwguggubwubrbwgburuggrrruwurrubbugwrgrgrg",
    "gbwgurbbgubbbrubbgrgbugugwrbgwrwwurgwbwrrbrrwbrrurwru",
    "wbrbwrggubwbrguuuububwrrbrbgrwwgwgrggwgbgggurugugur",
    "rwbgrbwwwwrwruubbwbgbbwwwbgugrgwwwwbwuruurggwbbgbgrg",
    "rbwbrrwrrwubbrwwrubrrgwbugwbbwgwuwubrugrrbrugruwwrbbrrg",
    "brwwgggwurggbugurwwgwgwgruurrbwugruggrwrbwwgwgggurwwrggrg",
    "rbuwbuwbgbgurruuwrgggubwrwgggbgruuwrrrrrubub",
    "grurrugbruwurguurgurrrbuwwwbrrwrbuuwrwguguwwbbgbgrg",
    "uuwugugggruugbruwgrwwrrbwuuuwgbgruwuwubwbb",
    "rwwwuwwrgurwrggbuuggurbgggrurggurrrwurwwrbwrgwwbgwgurbur",
    "urrburbgrgwrbbwbwggrwwrubugbgwwwuwguwwurwwrgrggwwuwwgbgrg",
    "rbuubrgwbggbggggrbbugwwggrbrwgbgbbbubwwgrwgrg",
    "bwrgbrruubrurwubrgwgrgggwgwgrgbbbrggwwrgrg",
    "rubrbbrrbggurrrbbbwubgurwwgwrrrbugbuuurgbguguggrg",
    "rwbuwwwurbuuubwugwguuubgwruggbgrruwgwgrwrgubwwugrwruu",
    "buuubwggwgwwbrubwwwwrgggbrwwuwgrgbrwrbuwggwuggwr",
    "gbwggrbrbbguwugruggrbbubwuwugwgwuguugbbbwurubguubrruu",
    "rurbrgwbwbwuuwrbuwgrrbwuuwbgubuugwgbuuugrbwrr",
    "bbuggrwrubgrwuwgrwgrrgwgrrruubgrugwbrbbuugb",
    "uuubgrbrgrurwrbbbbrwwurrbugwgugbrwwurwguuubgrg",
    "rwbbrbguwrwwubbrugrwwwrggwbugwuwbrrrrbubbgwrgwurgwu",
    "rwburuggrruurbrrwubgbwbbbrgbguuwrubrggurrwrgwgub",
    "gurgbwbggurrwwugrgbwwrbgrrbgbbrugwgwurrubwbwgwuwwbrrwguggrg",
    "wbbrbwgrbwbrubwbrurrruurrgggbwwurguguubbuguugugbwggwwgrg",
    "rrgbbrwuwbgwuuwbubwugrgbwwrrububrwuggrwgbbg",
    "ubgugrrubuwgwgbrbrruwrrrgrguruuurgwuuwwwwbggugwubwbbwuu",
    "bruugwrwbbwbbwbgbugrbggrurburgwrbbgwugrrguwgugbgru",
    "ggrwuwbgwgugrwurwggburgwbgbrbbbgrrggurgrg",
    "ubwubuuwbrubugbwggwrugrbwurgwbwbwgwrbrwrgwrubw",
    "gwrwurrgwwurrbgwbgruwggwugwguubwbgguugrrrrgug",
    "uubwwubuwbgugurbrgggugrrwrrwwurgrgurruwgggrwbwwgrg",
    "bgugurbbuuugbwgrwbbbrubgggwbuuuuwwugurwuuwbrugbbrurg",
    "brbbbbrrgwubwrwugurbggruuwuurwgrgrrggbugrg",
    "bbruwrwruwuuuggbwruwwbwurgrgwgwrbrbwuuuuggrg",
    "ubrrubruwuwwwrubwuugrgrrrruururubrbuuwbwgggwububwubgbgburr",
    "gbwrgwrgrubrrbubrggwurugggwuwrwrbwubbbrgburgwbubwwrgrg",
    "bgbwrrgwurguwrurgwwwuwbuwwrgbururbubugggwgubuuu",
    "rbrbuwrwrugbburwuuwrwwrbugrbruubbbgwbbwurrgrg",
    "rrgwuggrwbbgwggwuruuguubwrubggwrguurrrwurbuuubwrgwrrgrg",
    "wggrrrrubrgbwwruwwguwwuwubburgrbuuwgwugbrgubwgbwbbgwruwub",
    "ubggbwwgruugwwuwbwguwrrgruburbbwrgwbguwwrruggwbggr",
    "gwrrrwgburrguwbbubwggwbwbgrguwrurubgggwuwwbrbbrrb",
    "bgwgububrgwrugbuwwubuguubwbbuwbgbbgrwwbgwwbuugwrugwbbgwu",
    "rrgrrrgugbubrbuwwrubuwwbbwgwugrbggwgwwgbubgbugrurbbgrbugrg",
    "rbbrrwubbbwuggbuwrbwwbuuuwrbubrbrgwwuwuwwuugwrbrrgwubugrg",
    "bbgwuggrwgubwwgbuguggbwgrgwrgwgrrrwrbuuggwrgu",
    "uwbguugwwbgwwrurwwuuuwuuubuuuwgwwwwrggwwwgburrugwuw",
    "bubgwuggwuguubrugbggrbrwgwggwbruubggbrwuuwurgrg",
    "rbwurbbuguubbwrugrubwggguuugrugwrgrbgwwgubbgrg",
    "rrgrgrwbwgwgbgwrwwbrgbrubbwbbggurgwruwbggubrurwrbwrurgrg",
    "wrburguguwubuguguruwrbrrugbbgbwrgbgbgbuurwugbgbrgrg",
    "ggbururuggrwurrwbwgrbgrugugbrwgrurgrbrwwuuwwrrruwwbwgbgru",
    "rbwwbwgwggwugburgbgwgubwguurgbruurrgbuwbbg",
    "wrgwrbugbrggbuwgrgrruugwgurgbwrbwggrbbbgubwrbugbgwubbgrr",
    "ugwgwwubwrrbuurbrbrrrrrwbubgwrrggrbggbrbbgrbugrg",
    "guuwbbwubbwbubgwuggbgrubwwruuwbbggbwwgrg",
    "guuuubwwuuwggwuubwbrurrggwrwwbwuuwuggbgrbugbwggruwwgrg",
    "rbuuugbgbgugggwgruwrbwubwbbubugrbwguggbwubrwrbr",
    "uwgrbgwwbgbrubrgrwuburgwugrwrrgbbwbbbgurwwug",
    "rwwwrggwgwrwgwwbbuwbuubbrubuubwbwrrrrubruurrbwgrg",
    "wbbwrwgwrubgggwbguwgurbwurubggwwururbrgrg",
    "wrwwwbbubwuugbwwuugbrbwbbbwubugwbwbwbuubwgwbwguuggrgubwbg",
    "bubgbrgurbwgrbwbwuwugurbrwgbbwgwwbbgwgbbubbg",
    "uwbburuuwggbgrwggwruwbbrbrgurbwgbgubwuguwbbwbwurwurbububg",
    "uuuugwbwbwburuuuwbgwuwbwrrwbbgrrrwwrrgrg",
    "rwgguuwgggbrgugwbggrbggwrgwggrrbbwgubguwbbrbbwwrrgrgb",
    "wgbrwrrggbgugrwwuwruwbrguwrrwuwbwubbrbgrg",
    "ggbbubbwrwbbrrgguugrbwuwrubguurrruwuwgrg",
    "wwrrbgggwurwurbgubgurrbrbbwgbrrggugwbbrwwruwgw",
    "ruguwbgbbrbrwwugbwrwrgbururuwrrwgurgwwwrggrg",
    "grbuggwrburrrbggugbrbwgbgguwggubruwgrrbubbb",
    "bbwuwguuwuurrggggwwwgubugubgbrrwbrwgruuwbg",
    "bguubwuuuuguurbrurbwgbrrbgggrwrwrwugbbwgubgubbgrur",
    "wrrgbwwrwbrubbgrurbwbwbubuuugurwgbbwwbrrwrwwurggurruubbbub",
    "bwggbugrgbbbuwwrwgguwrgbwwuurrrbgrwwgwwwgrg",
    "wgbgwrbrwbrwgwwwwwwwgrrrgwgbbwrwbwgrwbrwbbwbbwggrg",
    "uggubwwbbwgwbgrubbgwgggwubbbwrbgugrgubbbrbburbbgrg",
    "brurugwbbwgbrgbrrbgguuguwgbgrwrgggbggrurrbbbbubbruwrurbbbg",
    "grgururbbubrgugbrwbwwbwgbuggbgrgrwwgbwgrg",
    "burwruruwgrbuwugbgbgbwbugguwgwruwwbburuubwwgbbuubggrg",
    "uggugrwgbwbgwgrrgrbwggbgruuwrurgwgwrwgbururbgwbrwb",
    "bwubuubrbuuruwubbgbwrgwrwwbwrrbrrbrwurgwbrbwgubrwbuw",
    "gwuguurwuubuwgbbwububrburbwrbuwrrugwurgbwugwuggrbb",
    "wwwrurbgwgwbbubbubgwgbbuwwwwbbgugrwgwruubbrurrwrugrwwgrgrrg",
    "gwrgwrgbgubbrbuwbugbguuurwgruurgrubbrbgwgruru",
    "bbwwgwrurgbugbgubwbuwbwrwrrggwwgugwrgwgrguwwgrbuuuggwu",
    "bugruwwubbbbguggggbrruwbwrrggguugrrgbgrgwwwrgwwuuuurgrg",
    "uwgbbbuugwgggrbuugwggbgbbbrgggbbbbgbwwbuwggbwwubwrr",
    "uwgrbwrurguurbwuruuwbuwrgwwwgrrurwurruruuggbgrg",
    "gbbgubuwwgwubwrbrrwrwgwurgwbrrbrbrbggbbrguwguubbggrg",
    "ggbgrggrbugrrrugrguwbwgwbwwrrgugurbrrbgrbbwwguurrgbubgrg",
    "wrwwbururbbwwrgbggrubgugrbuugrugubbbguwgrg",
    "guwrbrwwuwgruwrwburrrgrgrbrbggbbrggurubrgggubbbb",
    "guubbwwrbwgwurrrbwbwrwuwugbgrwrbrubugbugrgrrwruug",
    "wuwggburbgwrwuggbwbgbwubuwrgwwbrbgurubruuburgrg",
    "ubguwgrgwggbugrggggruwguruwgbgubrrbggurwru",
    "ubgbuwgggwggbgururbbburbwuwwbbbwuggggggguw",
    "bgggbwwugwuwbggbugugwrurgurbuubwggbggggbuurubrrbggwwgrrwgrg",
    "uggwgrurrgrggugbbruwrurwrwbrwrbrgguugurubrwbrgrrwwggrg",
    "bgwubgrbugwurrubrwuwuguruwwubwgrgrgbbgruubwgwbgrg",
    "wuuuwugwgrwgwgbugbuggggugbgbwuubbuwwwgrwwbwuurg",
    "brbwuruwrgugbubgrgrrwguuurwurwubwwugbrbruwgrbuggwbwuwrw",
    "guwwwrbwbgbuurwwgubgwwbwgbrbwuwgrgrbrwurgugruwggrg",
    "ggwwwruuwwguwwruubgwuggbrwgugurgrugbwubgrbbbwbubwwwggrwgb",
    "bguggbbbrgwbgwbwwrgbwurgbgugwurbuurggwguwuwurbubugbgrg",
    "rrbbbrbburrbrubggbbrbgwrgwbgrgrrrbrbbbguwrrurrwburrb",
    "gbwbrbwubbuggugbrgbbugggrbrwrgbuuuwuguuugg",
    "wggrbbgbrrbuguggbgwgrgbuubbgwwbrugwbgrbbggrgwrw",
    "uurwguuugwgbbrguugbgbburrwugburugbgrwwgrwwrguwbbruuugurgrg",
    "wuuwuuwbwwggbwwugbrbgbgruwbbuurrbwrburbwwuggggugbrrrwruuur",
    "gbuwwwruruguwgurwbbbwuwwubbuwugubbwgruwrurgwgburguwburb",
    "grubugwbrbbgubwbruwrbwwwbggubrgbubrbgbbwbgrubgrgbg",
    "brbwurwwrwgwurggugubruububrrgbgbuwbuubwbbwugrg",
    "uwuuburgguggrrrgwbguwrguuugwbwbrruuggruguwuwrwbbgbrwuggrg",
    "uurrrwuwurbrwrwwbubrgrrbuuwurwuwwgrbbgwgruubgrubrwbgw",
    "rwwbruwubgbrwgugrggurbguubwubwbuburrbwrgbu",
    "gwrgbrwgrrugbrbbugbgbubrbrwbwbrubbbguwbwrggrg",
    "gwrbwguwuwrugwrggwgrwwrbuwbrbgwbwbrgubrrwrrrbrrggrwbgwbgrg",
    "wrubbggrrwgwwburubuwubrgrbbruggggbggwwbwrrggggrubbugrg",
    "brugubuwwbrubrgrwrbgwbggurbbwurgbbuwwrwwgg",
    "bgwuurgwgbgwuwbgbgububbgwgbgwgrwbwgubbrgbwuwwgbbguuguwrwwr",
    "rbbggggbgrwgwrwbrrgwgbrgbwggbubrwurwbbbbwrbbwgrg",
    "wuuwurbwuwbgubbbwbguurrrbbuwurrgruwuguguwggbbwgrrggrwbbu",
    "wwbbwwruuuggrbugggburgbwrbwburuggbrguuwbbbug",
    "burrruburbuggrbuuwwguggwwugwbuwuuwuguwbbbggbrguur",
    "wbbwggbwuwwwbbuwgrwrgggbrubgrwrgggrrwgbugwbrbrwguwubgbgrg",
    "ruwubuwrbuwwrwbugbwrbbwbbruubuwbrugbgruwgwbururrugrg",
    "wwwwrbwbgbuugrwwububgguwwbrrgrbubgwbwwrbugrrb",
    "ruurbuurrgugwrurwuuwbwwgwrwugwbrbrrgbgubwrgguuwgrg",
    "grwrurubwrbuwbbwguruggrrgwuurgwbrburbrrgwwb",
    "gbrwbbuwbwwguwgbuururuwrwrgwbwuruwggbwuurwggbgubwugrggggrr",
    "uwruuwwwrgrrrguuggwbbgbgrggwwuugrgrgbugbwbwuubgbbru",
    "wrwubgubugubgrrrwrgbrgwbgrbwbwubgbuuwruwrrbwugrwrwbgbrgwbr",
    "ubwwwwuubwwwwbwubgwwbrgbuurrbgbgbrugurbrugrgbrr",
    "grwubrbwguubrgwuburbgbgrrugurwrgrwwururrwgwbuw",
    "bbwbgwrgbbwrwrububuwugrbgrrwuwgbrbgwbuwruwwruuuubbbrrurrgrg",
    "uwrrbrgbrrbwbbubbwbwgbwbbbggwugguuwwrbwruurrbgrrwgubgrg",
    "grrrwwrwwubrrubbrguwugwgbrbgubgrgwbggwwrurrubggrggwwrwrb",
    "bwrgwbrurgbruwgbbbuuguuwggurbbwguuurwgbbubuwruu",
    "ggbwgurwwubgrbruwrrgbbwbuwurwgguwgrrwwugruwwuuguugurgrg",
    "gugurgwurrwbruugubruwrbbrgrwrwgrrbbggbbggwbwrw",
    "ugbubrbguuuwwrggrgwugbgrugrgbwrwwwrbruugrgrrg",
    "guwwuuburwgrgrbggrggbrruwrbggugwbbrbrgbwwwugrg",
    "ruwgwgrwrwwrbubrgrgggbbggggrrggurggbubugurrrgbgbrugww",
    "bbbuwwwbrwguwrwbwgwgwrgwgrurrbwrggwwuguwrurrugurrgbrruurb",
    "rwbuuwbggrrbuwggwgurbuwrwwwguugwbuurbgwurru",
    "rwrwrgwuwburrwbbwbbbgubguwugrwbwwuuwbgbubrrbgg",
    "gubrgbwbgbrbgrggbuwbrgbwbbwbrwbwuggrrgrg",
    "bgwwrwubbgrbwgrwbgbubgbwgrbwggrubwrrwwubwubuu",
    "gugrrgwgrgrggurubrgruwuwubububgwbwbrbrrrwrgbbwbggwwbbwgwu",
    "grbwrwbuwruwrbwrbwububrrubgbguggbwgbrwgrbbwbbgrg",
    "wbubgrubugwruwbbgrbrwbuubgwubgrbuugurbgwwrgbrggrbw",
    "urbwgwuubrgubwurugubgwgbbwbrbbbrwgrgbubbwgbbwwbgurgrg",
    "ggwrwwrwbbrgugwuuguburrburgrbrgbrwwwwrgwuggrgrrg",
    "uubgwrubruurwbugwrrrwwwurbgwgbrugbwrrguburbwburrbbbg",
    "gbggbgrugurburwbbrbgubbgugbrrrgwuuwbwrgwbguwgbg",
    "uggwwrgggwwwrruwuuwrbuuugrbwugbrgruuuuwugrg",
    "rrgbwuwgggrgbgbgrggruwbbgwuwggbgwbggbrbuurbrwu",
    "rwuggugrwrgrggbrgbgruwuwgrgwrurruwwrwrwgrrurggurbbrrwubb",
    "rubbrurrwgguwurggwbbbgbrrubwrwgrggrbgrugbgbw",
    "wrwuurbgrrbrrbbrgggurubrgguruwgubgrurgrg",
    "urwgururbwgrgbrbgggruuwgrbrbrgwwgubbwbrrrgwgggrwubbrwrubbgrg",
    "grguuwggrwrrrwbbrggwbrrubbgwubbbuwuurwrbwbwrbgrbuwbubgbbgg",
    "buuurgwurrbwwruwwurruwrrgurwwugggrggubbwugbrbbbrrwurubugb",
    "grbgruwuwuwwgruuwrwuubwrbbrgbrubbrgruubwrrggrg",
    "brugwwbwurruwgrbrurbruwgwbrwwgrwugwwrwwurbugwburbbbbbwurw",
    "brugugwguruwbwugugurwwwwrrwbubgbrbbwwgrurgugwgwwbgbrrrruru",
    "wgwggbbrugrububgggubbburwbgbgrurwwguggrwrgwu",
    "wbburuuuwbrgggubugruwurgrwugwuuruuwubgguggrwrubg",
    "uugwurguugrbrrgrgurrgggwrggwwgrburgrbbwrwggbrurgruuuwbwgrg",
    "bbggubrubrguguggruuburwgbgwrgbbbugrruguuwurrgwggwrrur",
    "bburbggwrgruubwwrwwgwrrbrwruurbbrwubgurwgrg",
    "rrwbgbgbwuuugrgggrbwgwgwbggrggugburrbrrrbruwgurbgrg",
    "brrwbrbugubwuubrubwrwubbbbuwwbrwwuwuwrggwr",
    "rgwwrbubuwugurwgugwwbgrgurggwwgrburwbggrgub",
    "brguuugwwguggrbbruwwwrgrbrrurbwuwwgrbbbrrrbbuwuggg",
    "gwwburrburrguguwrggbugwruurbbwguruwbguuugbwbrrgg",
    "gggubrrgwgwggggugbbrrrggruwgrwrgruwgbrurrggrwbgububruuwwrgrg",
    "wrbrwwbrbrgbrrwrwwrgwrruwugrwgruguwubruwbrrburbwgbgr",
    "rgwbrbrbwgbrwrrwrrugwgbrugbrbuwgwbrwbggubrgrg",
    "ggbrrgurgurwguubrbgruwgrurwbwubguuruurrwgruguguwgrg",
    "rrbugburbbrggwgbrwugubrwubgbrubbrrwubbrwbgbguwrbubuwuuguw",
    "ruwuwgbwbgrgubrwrggrwwuuuwbbrruwrrbuuugrg",
    "gugwgwurrbwuwwrwwwurbrruwbrbuugwrubrbbuuubwrgrrwbgbrwbg",
    "rrbgbgbwwbwuwwrbwrugbrurwubruwwgwbwbwbwurgrg",
    "gwurgwugwbrguwwugrrbrwbwwrbuuwbuwguurrburggugwggbbguuuuu",
    "ubwggubwbggrrwgurbrbubruwguubbbbggwwbbwbbwrubuggrg",
    "urggwrburbbgwubwugbruwguwggbbrwgbugwbwwuruwwwgrg",
    "bbgwuwuuwwrwuwwgbgugwwwgurgwrwubrgugrrrgwuuwruwuubrwrbrr",
    "grgwrgubburwwwrwwugbgrgwurruwrrrrwuruurbrrbgbbbgwrrwgrg",
    "bbbggrggrbwbgrbrgubwwggugrwgrbrrubburbrugbgugwgwur",
    "wugrgubwrrurgrgwbgwbwuubgwgbbwuwugbwgbwugrgguuwwgrg",
    "uwwbguguggbbbrwrwbguurrgbrwwuwwruwurwbrbrwguuurugrgrg",
    "brwuwbwwugrbbbubbwbbubbrgrwggbbbgbgggbuburbwggwuugrg",
    "gwrbgrrbbuwwuugwggubwbuwuwbgggbrrwrubwbubgbgbgwggrg",
    "grbbbwwwggugbrbwwggwwrrwwugrurwgugbuwuuugrbwb",
    "urugguuguwgbwurwbwrrurbuwgwgrbwurbbgrbbrgrwbuwwburbbgruwr",
    "bgrugbwwuggrrwgrbbrgrggubrwwuuuurggrrgurggbbr",
    "bruuwbruurwugwubbguwurbububgrgrrwugburrwurgb",
    "wwuwgbbuuubwwguwwugrrwbgrwguggugguuwbgubgrwu",
    "grbgrgbuwgbuwburwrurubrguwrrbbgwuuwgruurburwwwubbrrurgwbgrg",
};

bool crop_pattern(std::string& pattern, Towels& towels)
{
    for (;;)
    {
        if (pattern.empty()) return true;
        std::size_t n{0};
        for (const auto& map: towels)
        {
            for (const auto& vec: map.second)
            {
                for (const auto& towel: vec.second)
                {
                    if (!pattern.ends_with(towel)) continue;
                    if (n > 0) return true;
                    n = towel.size();
                }
            }
        }

        if (n == 0) return false;

        pattern = pattern.substr(0, pattern.length() - n);
    }
}

uint64_t eval_pattern(std::string_view pattern, const Towels& towels, Scores& scores)
{
    auto len{pattern.size()};
    if (len == 0)
        return 1;

    if (scores.contains(pattern)) return scores[pattern];

    uint64_t ret{0};

    const auto* p = pattern.data();

    auto& map = towels.at(pattern[0]);

    auto& vec0 = map.at(0);
    if (!vec0.empty())
    {
        ret += eval_pattern({p + 1, len - 1}, towels, scores);
    }

    if (len > 1)
    {
        auto& vec = map.at(pattern[1]);
        for (const auto& towel: vec)
        {
            if (pattern.starts_with(towel)) ret += eval_pattern({p + towel.size(), len - towel.size()}, towels, scores);
        }
    }

    scores[pattern] = ret;
    return ret;
}

uint64_t solve(Patterns& patterns, Towels& towels, bool count_all)
{
    Scores scores;
    uint64_t ret{0};
    for (auto& pattern: patterns)
    {
        for (auto it=pattern.begin(); it != pattern.end(); it++)
        {
            towels.try_emplace(*it);
            towels[*it].try_emplace(0);
            if (it + 1 != pattern.end()) towels[*it].try_emplace(*(it + 1));
        }
        if (crop_pattern(pattern, towels))
        {
            auto ret2 = eval_pattern(pattern, towels, scores);
            if (ret2 > 0)
                ret += count_all ? ret2 : 1;
        }
    }
    return ret;
}

int main()
{
    Towels sample_towels;
    for (auto& s: sample_raw_towels)
    {
        if (s.size() == 0) continue;
        auto& l1 = sample_towels[s[0]];
        auto& l2 = l1[s.size() > 1 ? s[1] : 0];
        l2.push_back(s);
    }

    Towels towels;
    for (auto& s: raw_towels)
    {
        if (s.size() == 0) continue;
        auto& l1 = towels[s[0]];
        auto& l2 = l1[s.size() > 1 ? s[1] : 0];
        l2.push_back(s);
    }

    std::cout << solve(sample_patterns, sample_towels, false) << std::endl;
    std::cout << solve(patterns, towels, false) << std::endl;
    std::cout << solve(sample_patterns, sample_towels, true) << std::endl;
    std::cout << solve(patterns, towels, true) << std::endl;
    return 0;
}
